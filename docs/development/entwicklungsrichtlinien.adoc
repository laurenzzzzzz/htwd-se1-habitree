= Entwicklungsrichtlinien
:toc:
:toc-title: Inhaltsverzeichnis
:sectnums:

== Einführung

Dieses Dokument beschreibt die Entwicklungsrichtlinien und Best Practices für das HabiTree-Projekt. Es dient als Leitfaden für alle Entwickler und stellt sicher, dass wir konsistent und qualitativ hochwertig arbeiten.

HabiTree ist eine mobile Habit-Tracking-App mit:

* **Backend**: Express.js REST API mit Prisma ORM
* **Frontend**: React Native App mit Expo
* **Datenbank**: PostgreSQL

== Projektstruktur

----
htwd-se1-habitree/
├── src/
│   ├── backend/              # Express.js Backend API
│   └── habitree/             # React Native Frontend
└── docs/                     # Projektdokumentation
    ├── architecture/         # Architektur-Dokumente
    ├── development/          # Entwicklungs-Dokumentation
    ├── requirements/         # Anforderungen & Vision
    └── test/                 # Test-Dokumentation
----

== Coding Standards

=== Allgemeine Richtlinien

* **Formatierung**: Konsistente Code-Formatierung
* **Code Reviews**: Jeder Code muss vor Merge reviewed werden

=== Backend (Express.js + Prisma)

* **Architektur**: Route -> Middleware -> Controller Pattern
* **API Design**: RESTful API-Prinzipien
* **Authentication**: JWT-basierte Authentifizierung
* **Error Handling**: Strukturierte Fehlerbehandlung mit HTTP Status Codes
* **Database**: Prisma ORM für Datenbankzugriffe


=== Frontend (React Native + Expo)

* **Components**: Funktionale Komponenten mit Hooks
* **State Management**: React Context API für globalen State
* **Navigation**: Expo Router für Navigation
* **Styling**: StyleSheet
* **Clean Architecture**: Trennung von Presentation, Application, Domain, Infrastructure

== Versions- und Konfigurationsmanagement

=== Repository-Struktur

* **Main Branch**: `main` - Produktionsbereiter Code
* **Feature Branches**: Temporäre Branches für neue Features
* **Bugfix Branches**: Temporäre Branches für Fehlerbehebungen

=== Branch-Naming Convention

* `feature/<kurze-beschreibung>` (z.B. `feature/add-streak-tracking`)
* `bugfix/<kurze-beschreibung>` (z.B. `bugfix/fix-login-error`)
* feature sowie bugfix branches werden nach merge gelöscht


=== Commit Message Format

----

<type> kurze beschreibung

----


**Types:**

* `Update`: bestehendes Dokument aktualisiert oder bestehenden Code aktualisieren ohne neue Funktionen hinzuzufügen
* `Add`: neues Feature oder neue Datei hinzufügen, neue Bereiche in der Dokumentation erstellen
* `Bugfix`: Fehlerbehebung
* `Delete`: Datei oder Code entfernen, bestehnede Bereiche in der Dokumentation löschen

=== GitHub Workflow

==== Branch erstellen

[source,bash]
----
git checkout main
git pull origin main

# Neuen Feature Branch erstellen
git checkout -b feature/mein-neues-feature
----

==== Entwicklung & Commits

[source,bash]
----
# Änderungen staged
git add .
git commit -m "add habit streak visualization"
----

==== Push & Pull Request erstellen

[source,bash]
----
# Branch pushen
git push origin feature/mein-neues-feature

# Pull Request auf GitHub erstellen
----

==== Code Review

* **Selbstreview**: vor Pull Request neue Feature selbst prüfen
* **Mindestens 1 Reviewer** muss den Code prüfen
* **Review-Kriterien**: Code-Qualität, Lesbarkeit
* **Änderungen umsetzen**: Feedback aus Review einarbeiten

==== Merge

* **Squash and Merge** 
* **Delete Branch** nach erfolgreichem Merge
* **Main aktualisieren**: Lokalen Main Branch aktualisieren

== CI/CD Pipeline

=== Manuelle Überprüfung

Vor dem Merge sollten folgende Punkte überprüft werden:

* **Code kompiliert**: Keine Syntax-Fehler
* **Funktionalität**: Feature funktioniert wie erwartet
* **Keine Regression**: Bestehende Features funktionieren noch
* **API-Tests**: Backend-Endpoints mit Postman/REST Client testen
* **Mobile Tests**: Frontend auf mindestens einem Gerät/Emulator testen


== Testing

Bis zur Implementierung automatischer Tests sollten Änderungen manuell getestet werden:

- **Backend**: API Endpoints mit Postman
- **Frontend**: UI-Funktionalität mit Expo Go App

== API-Dokumentation

=== Backend API

Die HabiTree Backend API ist dokumentiert mit:

* **JSDoc**: Inline-Code-Dokumentation
* **OpenAPI**: API-Spezifikation in `docs/architecture/openapi.yaml`
* **Generated Docs**: HTML-Dokumentation in `docs/development/backend/`

==== JSDoc-Dokumentation generieren und öffnen

**Dokumentation generieren:**

[source,bash]
----
cd src/backend
npm run docs
----

**Dokumentation öffnen:**

[source,bash]
----
# Navigiere zum generierten Verzeichnis
.\docs\development\backend\index.html
----

==== OpenAPI Dokumentation (Swagger UI)

**Datei anschauen:**

Die OpenAPI-Spezifikation befindet sich unter:
----
docs/architecture/openapi.yaml
----

Diese Datei kann mit verschiedenen Tools geöffnet werden:

**Option 1: Swagger Editor Online**

Gehe zu: https://editor.swagger.io/

* Datei hochladen oder Copy-Paste
* Interaktive API-Dokumentation im Browser

**Option 2: VSCode Extensions**

* Extension "OpenAPI (Swagger) Editor" installieren
* Datei direkt im VSCode mit Live-Preview anschauen

